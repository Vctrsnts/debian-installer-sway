# 1. Verificar que swaynag funciona por sí solo
swaynag -t "warning" -m "Prueba de swaynag" -b "OK" "echo 'Botón OK pulsado'"

# 2. Probar que swaymsg puede cerrar sway
# ⚠️ Esto cerrará tu sesión de sway si funciona
swaymsg exit

# 3. Probar que systemctl puede reiniciar y apagar (requiere permisos)
# ⚠️ Esto reiniciará/apagará tu sistema si funciona
systemctl reboot
systemctl poweroff

# 4. Ver si el atajo de teclado se está registrando en sway
# Abre otra terminal y ejecuta:
swaymsg -t subscribe '["binding"]'
# Luego pulsa tu atajo ($mod+Shift+e) y mira si aparece el evento

# 5. Probar el comando exacto que tienes en la config, pero pegándolo en terminal
swaynag -t "warning" -m "¿Salir de Sway?" -b "Salir" "swaymsg exit" -b "Cancelar" "true"

# 6. Revisar el log de sway para ver si hay errores al cargar la config
sway --version
swaymsg -t get_version
journalctl --user-unit=sway.service -b | grep -i error

# 7. Recargar la configuración y ver si hay mensajes de error
swaymsg reload


----------------

# === PRUEBAS PASO A PASO ===

# 1. Probar que swaynag funciona
swaynag -t "warning" -m "Prueba de swaynag" -b "OK" "echo 'Botón OK pulsado'"

# 2. Probar que swaymsg puede cerrar sway (⚠️ cerrará la sesión si funciona)
# swaymsg exit

# 3. Probar que systemctl puede reiniciar/apagar (⚠️ reinicia/apaga si funciona)
# systemctl reboot
# systemctl poweroff

# 4. Ver si el atajo se detecta
swaymsg -t subscribe '["binding"]'
# → Pulsa $mod+Shift+e y comprueba si aparece el evento

# 5. Probar el comando exacto de la config en terminal
swaynag -t "warning" -m "¿Salir de Sway?" -b "Salir" "swaymsg exit" -b "Cancelar" "true"

# 6. Revisar errores en el log de sway
journalctl --user-unit=sway.service -b | grep -i error

# 7. Recargar configuración
swaymsg reload

# === CONFIGURACIÓN MÍNIMA PARA PROBAR EL ATAJO ===
# Guarda esto en un archivo temporal y carga con: sway -c /ruta/a/este/archivo
set $mod Mod4
set $nag_exit exec swaynag -t "warning" -m "¿Salir de Sway?" -b "Salir" "swaymsg exit" -b "Cancelar" "true"

mode "Salir" {
    bindsym l $nag_exit
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

bindsym $mod+Shift+e mode "Salir"

--------------------

Firefox en wayland


# 1. Asegúrate de iniciar Firefox con el backend Wayland
# Puedes exportar la variable en tu shell o en ~/.profile, ~/.bashrc, etc.
export MOZ_ENABLE_WAYLAND=1

# Si usas un lanzador .desktop (menú de aplicaciones), edita la línea Exec:
# Exec=env MOZ_ENABLE_WAYLAND=1 firefox %u

# 2. Ajustes recomendados en about:config (escribe about:config en la barra de direcciones)
# Busca y cambia:
# widget.wayland-dmabuf-vaapi.enabled → true   (acel. vídeo VA-API en Wayland)
# widget.wayland-dmabuf-webgl.enabled → true   (mejor rendimiento WebGL)
# gfx.webrender.all → true                     (forzar WebRender)
# media.ffmpeg.vaapi.enabled → true            (decodificación por hardware)
# layers.acceleration.force-enabled → true     (forzar aceleración GPU)
# widget.use-xdg-desktop-portal.file-picker → 1 (usar selector de archivos nativo Wayland)

# 3. Verifica que estás en Wayland:
# En Firefox, abre about:support y busca "Window Protocol"
# Debe decir: wayland
